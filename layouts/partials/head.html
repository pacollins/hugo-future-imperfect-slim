<head>
  {{ partial "meta" . }}
  {{- hugo.Generator -}}

  {{ with .Site.Title }}<meta property="og:site_name" content="{{ . }}">{{ end }}
  {{ with .Title }}<meta property="og:title" content="{{ . }}">{{ end }}
  <meta property="og:description" content="{{ .Description | default .Site.Params.meta.description }}">
  <meta property="description" content="{{ .Description | default .Site.Params.meta.description }}">
  <meta property="og:url" content="{{ .RelPermalink | absURL }}">
  <meta property="og:type" content="{{ cond .IsHome "website" "article" }}">
  {{ with or (.Params.openGraph) (.Params.images) }}
    {{ range . }}
      <meta property="og:image" content="{{ .src | absURL }}">
      <meta property="og:image:alt" content="{{ .alt }}">
    {{ end }}
  {{ else }}
    <meta property="og:image" content="{{ .Site.Params.intro.pic.src | absURL }}">
  {{ end }}
  {{ with .Site.Params.Social.twitter}}<meta property="twitter:site" content="{{ . }}">{{ end }}

  {{- $assets := resources.Get "assets.json" | unmarshal -}}
  {{- $mainCSSOptions := (dict "targetPath" "css/bundle.min.css" "outputStyle" "compressed") -}}
  {{- if .Site.Params.enableCDN -}}
    {{- if .Site.Params.highlightjs -}}<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/{{ .Site.Params.highlightjsTheme | default "default" }}.min.css">{{- end -}}
    {{- range $assets.styles -}}
      <link rel="stylesheet" href="{{ .cdn }}">
    {{ end }}
  <!-- TODO: Header Scripts CDN -->
  {{- end -}}
  <!-- TODO: Header Scripts Local -->
  {{- $styles := resources.Get "scss/main.scss" | resources.ExecuteAsTemplate "bundle.scss" . | toCSS $mainCSSOptions | fingerprint -}}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" integrity="{{ $styles.Data.Integrity }}">
  {{- if eq (i18n "letter_direction") "RTL" -}}
    {{- $rtl := resources.Get "css/rtl.css" | minify -}}
    <link rel="stylesheet" href="{{ $rtl.RelPermalink }}">
  {{- end -}}

  {{- .Scratch.Set "Permalink" .Permalink -}}
  {{- .Scratch.Set "Title" .Title -}}

  {{- if .Params.Author -}}
    {{- .Scratch.Set "Author" .Params.Author -}}
  {{- else -}}
    {{- .Scratch.Set "Author" .Author -}}
  {{ end }}
</head>
